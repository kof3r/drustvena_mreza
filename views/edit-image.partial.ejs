<div class="container">
    <!-- naslov slike -->
    <textarea class="form-control" rows="1" id="titleArea"></textarea>
    
    <!-- slika -->
    <a href="<%= '/image/edit?id=' + imageID %>" class="thumbnail">
      <img src="<%= '/bytes/image?id=' + imageID %>" alt="Medium Image" style="width:500px;height:500px">
    </a>
    
    <!-- opis ispod slike -->
    <div class="row">
        <div class="col-md-4" id="dateColumn">
            <p id="dateModified"></p>
        </div>
        <div class="col-md-4">
            <button type="button" class="btn btn-info" id="bubbleNameButton"></button>
        </div>
        <div class="col-md-4" id="authorNameColumn">
            <p id="authorName"></p>
        </div>
    </div>
    
    <!-- opis slike -->
    <div class="row">
        <textarea class="form-control" rows="5" id="descriptionArea"></textarea>
    </div>
    
    <!-- gumbi save i delete -->
    <div class="row">
        <div class="col-md-6">
        </div>
        <div class="col-md-3">
            <button type="button" class="btn btn-warning" id="deleteImageButton">Delete</button>
        </div>
        <div class="col-md-3">
            <button type="button" class="btn btn-primary" id="saveImageButton">Save</button>
        </div>
    </div>
</div>

<script>
    var bubbleID = "";
    
    //popunjavanje naslova, opisa,...
    $.get("/content/image?id="+imageID, function(imageDescriptor, status) {
        //naslov slike
        $("#titleArea").append(imageDescriptor.title);
        //date modified
        $("#dateModified").append(imageDescriptor.updated_at);
        //image description
        $("#descriptionArea").append(imageDescriptor.description);
        
        //get bubble info
            //get user info        
       $.get("/bubble/info?id="+imageDescriptor.bubble_id, function(bubbleDescriptor, status) {
           bubbleID = bubbleDescriptor.bubble_id;
           
           //naslov bubblea
           $("#bubbleNameButton").append(bubbleDescriptor.title);
           
           $.get("/user/info?id="+bubbleDescriptor.user_id, function(userDescriptor, status) {
               //ime autora
               $("#authorName").append(userDescriptor.username);
           });
       }); 
    });
    
    //upravljanje gumbima
    //bubble name
    $("#bubbleNameButton").click(function(){
        window.href.location="/bubble?id=" + bubbleID;
    });
    
    //save button
    $("#saveImageButton").click(function(){
        var imageTitle = $("#titleArea").text();
        var imageDescription = $("#descriptionArea").text();
        var imageJSON = {id : imageID, bubble_id:bubbleID, title:imageTitle, description:imageDescription};
        
        $.post("/content/image", imageJSON);
        
        //vjer. će trebat neki redirect odradit, na homepage ili galeriju
    });
    
    //delete button
    $("#deleteImageButton").click(function(){
        $.post("/content/delete/image", {id:imageID});
        
        //vjer. će trebat neki redirect odradit, na homepage ili galeriju
    });
</script>